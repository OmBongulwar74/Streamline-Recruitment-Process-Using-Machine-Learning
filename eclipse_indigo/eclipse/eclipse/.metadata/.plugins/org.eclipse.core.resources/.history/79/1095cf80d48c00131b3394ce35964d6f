package Service;

import javax.servlet.http.HttpServletRequest;

import bean.DoctorBean;
import bean.LoginBean;
import bean.PatientBean;
import controller.DoctorConverter;
import converter.PatientConverter;
import database.DAOQueries;

public class RegistrationService {
	
	public boolean register(HttpServletRequest request)
	{
		PatientConverter insert=new PatientConverter();
		if("Patient".equalsIgnoreCase(request.getParameter("UserType")))
		{
			PatientConverter convertToBean=new PatientConverter();
			PatientBean bean=convertToBean.getPatientBean(request);
			DAOQueries db=new DAOQueries();
			
			int rowInsert=db.insertPatientRecord(bean);
			LoginBean loginInfo=new LoginBean();
			loginInfo.setUsername(bean.getEmailId());
			loginInfo.setPassword(bean.getPassword());
			if(rowInsert>0){
			EMail mail=new EMail();
			mail.sendMail(loginInfo);
			}
			
		}
		else if("Doctor".equalsIgnoreCase(request.getParameter("UserType")))
		{
			DoctorConverter convertToBean= new DoctorConverter();
			DoctorBean bean=convertToBean.getDoctorBean(request);
			DAOQueries db=new DAOQueries();
			
			int rowInsert=db.insertDoctorRecord(bean);
			LoginBean loginInfo=new LoginBean();
			loginInfo.setUsername(bean.getEmailId());
			loginInfo.setPassword(bean.getPassword());
			if(rowInsert>0){
			EMail mail=new EMail();
			mail.sendMail(loginInfo);
			}
			
		
		}
		
		
		
		
		
		
		return false;
	}

}
